<link rel="import" href="../polymer/lib/mixins/property-accessors.html">
<link rel="import" href="import-lit-html.html">

<script>
	class GrainLitElement extends Polymer.PropertyAccessors(HTMLElement) {

		static finalize(name) {
			const proto = this.prototype;
			if (!proto.hasOwnProperty('__finalized')) {
				this.createPropertiesForAttributes();
				proto.__finalized = true;
				return true;
			}
		}

		_propertiesChanged(...args) {
			super._propertiesChanged(...args);
			this.update();
		}

		update() {
			render(this.render(), this.shadowRoot);
		}

		connectedCallback() {
			this._enableProperties();
		}

		ready() {
			super.ready();

			this.constructor.finalize(this.localName);
			if (!this.shadowRoot) {
				this.attachShadow({mode: 'open'});
			}
		}

	}
</script>
